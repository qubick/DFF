<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Softness Design UI</title>


		<!-- p5.js for UI elements -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.11/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.11/addons/p5.dom.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.11/addons/p5.sound.min.js"></script>

		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"></link>

		<!-- jQuery library -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<!-- <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.js"></script>
		<script type="text/javascript" src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script> -->
		<script type="text/javascript" src="https://cdn.rawgit.com/prashantchaudhary/ddslick/master/jquery.ddslick.min.js" ></script>

		<script type="javascript/text" src="server.js"></script>
	</head>

	<style>
				#sideBar {
					position:fixed;
					width:300px;
					height: 100%;
					top:0;
					left:0;
					/* background-color: white; */
					opacity: 0.8;
					/*overflow: auto;*/
  				overflow-y: scroll !important;
				}
				.slider {
			    -webkit-appearance: none;
			    width: 100%;
			    height: 15px;
			    border-radius: 5px;
			    background: #d3d3d3;
			    outline: none;
			    opacity: 0.7;
			    -webkit-transition: .2s;
			    transition: opacity .2s;
			}
				#loadSTL {
					position: fixed;
					top: 105px;
					right: 0;
					width: 300px;
					height: 60px;
					background-color: grey;
					display: none;
				}
				.draggable{
					width: 150px
				}
			</style>

	<body>
		<div id="container" left="150px" top="0px" class="droppable">
			<script src="build/three.js"></script>
			<script src="build/csg.js"></script>
			<script src="build/ThreeCSG.js"></script>

			<script src="js/loaders/DDSLoader.js"></script>
			<script src="js/loaders/MTLLoader.js"></script>
			<script src="js/loaders/OBJLoader.js"></script>
			<script src="js/loaders/STLLoader.js"></script>
			<script src="js/Detector.js"></script>
			<script src="js/controls/OrbitControls.js"></script>
			<script src="js/libs/dat.gui.min.js"></script>
			<script src="js/libs/stats.min.js"></script>
			<script src="js/controls/DragControls.js"></script>
			<script src="js/controls/TrackballControls.js"></script>
			<script src="js/controls/TransformControls.js"></script>
			<script src="js/shaders/UnpackDepthRGBAShader.js"></script>
			<script src="js/utils/ShadowMapViewer.js"></script>

			<script src="./event-handler.js"></script>
			<script src="./param-interface.js"></script>
			<script src="./editor.js"></script>
			<script src="./material.js"></script>
			<script src="./region-selection.js"></script>
			<script src="./refer-material.js"></script>

			<div id="sideBar">

				<br/><br/><br/>
				<input id="fileInput" type="file" name="files[]" onclick="handleFileSelect"/>

				<br/><br/>
				<select onchange="ReturnDesiredInteraction(event)">
					<option value="0">Select Interaction</option>
					<option value="1">Foot Press</option>
			    <option value="2">Finger Press</option>
			    <option value="3">Sit</option>
			    <option value="4">Palm Grasp</option>
			    <option value="5">Finger Squeeze</option>
				</select>

				<br/><br/>
				<div id="refer-material" onchange="ReturnReferenceMaterial(event)"></div>

				<div id="sliderlocation"></div>

				<!-- <br/><br/> -->
				<!-- <select onchange="ReturnRegionSelection(event)">
						<option value="0">Select Region</option>
						<option value="1">By Sphere volume</option>
						<option value="2">By Cube volume</option>
						<option value="3">By Slicing in plane</option>
				</select> -->

				<br/><br/>
				<select onchange="ReturnTypeofGradient(event)">
					<option value="0">Select Gradient Type</option>
					<option value="1">Binary</option>
			    <option value="2">Linear</option>
			    <option value="3">Radial</option>
				</select>

				<div id="gradientlocation"></div>
		</div>

		<script type="text/javascript">

			$('#refer-material').ddslick({
				data: reference_material,
				width: 300,
				selectText: "Select preferred soft/hard materials",
				imagePosition: "right",
				onSelected: function(event){
				  // var shoreAScale = event.target.softness;
					var shoreAScale = parseInt(event.selectedData.softness);
					var input = document.createElement("input");

				  input.type = "range"
				  input.min = ((shoreAScale - 10) > 0) ? shoreAScale-10 : 0;
				  input.max = shoreAScale + 10;
				  input.value = shoreAScale;
				  input.class = "slider"
				  input.id = "softnessRange"
				  // input.onChange = "UpdateValue(evt)"

				  var textInput = document.createElement("text");
				  textInput.value = '<br/> Shore A scale: ' + shoreAScale;
				  textInput.id = "shoreAScaleValue"

				  document.getElementById('sliderlocation').innerHTML = '<br/> Shore A scale: <div id="softnessValue"></div>'
				  document.getElementById('sliderlocation').appendChild(input);
					var output = document.getElementById("softnessValue")
					output.innerHTML = shoreAScale;

					//update value should be defined when the slider is actullay created
					var slider = document.getElementById("softnessRange");
					slider.oninput = function(){
						output = document.getElementById("softnessValue")
						output.innerHTML = this.value;
					}
				}
			});


			function ReturnReferenceMaterial(data){

				console.log(data);
			  // var shoreAScale = event.target.softness;
			  var input = document.createElement("input");

			  input.type = "range"
			  input.min = ((shoreAScale - 10) > 0) ? shoreAScale-10 : 0;
			  input.max = shoreAScale + 10;
			  input.value = shoreAScale;
			  input.class = "slider"
			  input.id = "softnessRange"
			  input.onChange = "updateValue(this.value)"

			  var textInput = document.createElement("text");
			  textInput.value = '<br/> Shore A scale: ' + shoreAScale;
			  textInput.id = "shoreAScaleValue"

			  document.getElementById('sliderlocation').appendChild(document.createElement("br"));
			  document.getElementById('sliderlocation').innerHTML = '<br/> Shore A scale: ' + shoreAScale;
			  document.getElementById('sliderlocation').appendChild(input);

			}

			document.getElementById('fileInput').addEventListener('change', handleFileSelect, false);

		</script>

		<input id="fileInput" type="file" name="files[]" style="visibility:hidden" />

	</body>
</html>
